# 2020년 1월 19일
## 배운 내용
### 18. 리덕스 미들웨어를 통한 비동기 작업 관리
#### - 미들웨어란?
##### 리덕스 미들웨어는 액션을 디스패치했을 때 리듀서에서 이를 처리하기에 앞서 사전에 지정된 작업들을 실행합니다. 미들웨어는 액션과 리듀서 사이의 중간자라고 볼 수 있습니다. 

![pic](1_BHUKvOmqPjJHpRY1wp1YFw.png)

##### 액션 발생 -> 미들웨어에서 필요한 데이터를 API서버를 통해 가져옴 -> 해당 액션에 따른 리듀서 함수 실행 -> 업데이트된 내용과, 받아온 데이터를 store에 저장 (이 과정을 렌더링시 계속 반복)

```jsx
const loggerMiddleware = store => next => action => {
    //미들웨어 기본 구조
};
export default loggerMiddleware;
```
##### 위 코드에서 리덕스 미들웨어의 구조를 볼 수 있습니다. 화살표 함수를 연달아서 사용했는데, 일반 function 키워드로 풀어서 쓴다면 다음과 같은 구조입니다.
```jsx
const loggerMiddleware = function loggerMiddleware(store) {
    return function(next) {
        return function(action) {
            // 미들웨어 기본 구조
        };
    };
};
```
##### 미들웨어는 결국 함수를 반환하는 함수를 반환하는 함수입니다. 여기에 있는 함수에서 파라미터로 받아 오는 store는 리덕스 스토어 인스턴스를, action은 디스패치된 액션을 가리킵니다. next 파라미터는 함수 형태이며, store.dispatch와 비슷한 역할을 합니다. 하지만 가장 큰 차이점이 있습니다. next(action)을 호출하면 그다음 처리해야 할 미들웨어에게 액션을 넘겨주고, 만약 그다음 미들웨어가 없다면 리듀서에게 액션을 넘겨준다는 것입니다.

#### - redux-saga
##### redux-saga는 redux-thunk 다음으로 많이 사용되는 비동기 작업 관련 미들웨어입니다. 함수 형태의 액션을 디스패치하여 미들웨어에서 해당 함수에 스토어의 dispatch와 getState를 파라미터로 넣어서 사용하는 원리입니다. API 요청도 하고, 다른 액션을 디스패치하거나 현재 상태를 조회하기도 했습니다. 추가적으로 redux-saga는 좀 더 까다로운 상황에서 유용합니다.
* 기존 요청을 취소 처리해야 할 때(불필요한 중복 요청 방지)
* 특정 액션이 발생했을 때 다른 액션을 발생시키거나, API 요청 등 리덕스와 관계없는 코드를 실행할 때
* 웹소켓을 사용할 때
* API 요청 실패 시 재요청해야 할 때


### 19. 코드 스플리팅
##### 리액트 프로젝트를 완성하여 사용자에게 제공할 때는 빌드 작업을 거쳐서 배포해야 합니다. 빌드 작업을 통해 프로젝트에서 사용되는 자바스크립트 파일 안에서 불필요한 주석, 경고 메시지, 공백 등을 제거하여 파일 크기를 최소화하기도 하고, 브라우저에서 JSX 문법이나 다른 최신 자바스크립트 문법이 원활하게 실행되도록 코드의 트랜스파일 작업도 할 수 있습니다. create-react-app의 기본 웹팩 설정에는 SplitChunks라는 기능이 적용되어 node_modules에서 불러온 파일, 일정 크기 이상의 파일, 여러 파일 간에 공유된 파일을 자동을 따로 분리시켜서 캐싱의 효과를 제대로 누릴 수 있게 해 줍니다. 이렇게 파일을 분리하는 작업을 코드 스플리팅이라고 합니다. 그러나 프로젝트에 기본 탑재된 SplitChunks 기능을 통한 코드 스플리팅은 단순히 효율적인 캐싱 효과만 있을 뿐입니다. 만약 애플리케이션의 규모가 커질 경우 당장 필요하지 않은 컴포넌트 정보도 모두 불러오면서 파일 크기가 매우 커집니다. 그러면 로딩이 오래 걸리기 때문에 사용자 경험도 안 좋아지고 트래픽도 많이 나올 것입니다. 이러한 문제점을 해결해 줄 수 있는 방법이 바로 코드 비동기 로딩입니다. 코드 비동기 로딩을 통해 자바스크립트 함수, 객체, 혹은 컴포넌트를 처음에는 불러오지 않고 필요한 시점에 불러와서 사용할 수 있습니다.

### 20. 서버 사이드 렌더링
##### 서버 사이드 렌더링은 UI를 서버에서 렌더링하는 것을 의미합니다. 앞에서 만든 프로젝트는 기본적으로 클라이언트 사이드 렌더링을 하고 있습니다. 클라이언트 사이드 렌더링은 UI 렌더링을 브라우저에서 모두 처리하는 것입니다. 즉, 자바스크립트를 실행해야 우리가 만든 화면이 사용자에게 보입니다. 
##### 서버 사이드 렌더링 장점
* 구글, 네이버, 다음 등의 검색 엔진이 웹 애플리케이션의 페이지를 원활하게 수집할 수 있다. (검색엔진최적화)
* 초기 렌더링 성능을 개선할 수 있다.
##### 서버 사이드 렌더링 단점
* 원래 브라우저가 해야 할 일을 서버가 대신 처리하는 것이므로 서버 리소스가 사용된다는 단점 
* 프로젝트의 구조가 복잡해질 수 있다.
* 렌더링 전 데이터 로딩
* 코드 스플리팅과의 호환

##### 참조 https://medium.com/humanscape-tech/redux%EC%99%80-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4-thunk-saga-43bb012503e4 (사진) / 리액트를 다루는 기술
